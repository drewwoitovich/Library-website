DROP TABLE reading_list;
DROP TABLE author_book;
DROP TABLE book;
DROP TABLE author;
DROP TABLE [user];

CREATE TABLE [user] (
  user_id integer identity NOT NULL,
  username varchar(32) NOT NULL,
  password varchar(32) NOT NULL,
  last_search datetime,
  is_admin bit,
  newsletter bit,
  email varchar(max),
  CONSTRAINT pk_user_primary_key PRIMARY KEY (user_id)
);

CREATE TABLE author (
  author_id integer identity NOT NULL,
  first_name varchar(32) NOT NULL,
  last_name varchar(32) NOT NULL,
  CONSTRAINT pk_author_primary_key PRIMARY KEY (author_id)
);

CREATE TABLE book (
  book_id integer identity NOT NULL,
  title varchar(max) NOT NULL,
  genre varchar(max) NOT NULL,
  shelf_number integer NOT NULL
  add_date datetime NOT NULL,
  CONSTRAINT pk_book_primary_key PRIMARY KEY (book_id),
  );

CREATE TABLE author_book (
  author_id integer NOT NULL,
  book_id integer NOT NULL,
  CONSTRAINT pk_author_book_primary_key PRIMARY KEY (author_id, book_id),
  CONSTRAINT fk_author_foreign_key FOREIGN KEY (author_id) REFERENCES author(author_id),
  CONSTRAINT fk_book_foreign_key FOREIGN KEY (book_id) REFERENCES book(book_id)
);

CREATE TABLE reading_list (
  user_id integer NOT NULL,
  book_id integer NOT NULL,
  read_status bit,
  CONSTRAINT fk_user_id_foreign_key FOREIGN KEY (user_id) REFERENCES [user](user_id),
  CONSTRAINT fk_book_id_foreign_key FOREIGN KEY (book_id) REFERENCES book(book_id),
  CONSTRAINT pk_reading_list_primary_key PRIMARY KEY (user_id, book_id)
);
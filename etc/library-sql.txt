DROP TABLE reading_list;
DROP TABLE book;
DROP TABLE [user];

CREATE TABLE [user] (
  user_id integer identity NOT NULL,
  username varchar(32) NOT NULL,
  password varchar(32) NOT NULL,
  last_search datetime,
  is_admin bit,
  newsletter bit,
  email varchar(max),
  CONSTRAINT pk_user_primary_key PRIMARY KEY (user_id)
);

CREATE TABLE book (
  book_id integer identity NOT NULL,
  authors varchar(max) NOT NULL,
  title varchar(max) NOT NULL,
  genre varchar(max) NOT NULL,
  shelf_number integer NOT NULL,
  add_date datetime NOT NULL,
  CONSTRAINT pk_book_primary_key PRIMARY KEY (book_id)
  );

CREATE TABLE reading_list (
  user_id integer NOT NULL,
  book_id integer NOT NULL,
  read_status bit,
  CONSTRAINT fk_user_id_foreign_key FOREIGN KEY (user_id) REFERENCES [user](user_id),
  CONSTRAINT fk_book_id_foreign_key FOREIGN KEY (book_id) REFERENCES book(book_id),
  CONSTRAINT pk_reading_list_primary_key PRIMARY KEY (user_id, book_id)
);

SET IDENTITY_INSERT [user] ON;

INSERT INTO [user] (user_id, username, password, last_search, is_admin, newsletter, email) VALUES (1, 'drew', 'password1', '2018-08-10', 0, 1, 'drew@gmail.com');
INSERT INTO [user] (user_id, username, password, last_search, is_admin, newsletter, email) VALUES (2, 'bradon', 'password2', '2018-08-13', 1, 0, 'bradon@gmail.com');

SET IDENTITY_INSERT [user] OFF;

SET IDENTITY_INSERT book ON;

INSERT INTO book (book_id, authors, title, genre, shelf_number, add_date) VALUES (1, 'Alyson Wood, Drew Woitovich', 'Turtles', 'Fiction', 2, '2018-08-09'); 
INSERT INTO book (book_id, authors, title, genre, shelf_number, add_date) VALUES (2, 'Bradon Studebaker, John Fulton', 'Cats', 'Non-Fiction', 2, '2018-08-11');
INSERT INTO book (book_id, authors, title, genre, shelf_number, add_date) VALUES (3, 'Andrew Frank, Drew Woitovich', 'Dogs', 'History', 2, '2018-08-14');

SET IDENTITY_INSERT book OFF;

INSERT INTO reading_list (user_id, book_id, read_status) VALUES (1, 2, 1);
INSERT INTO reading_list (user_id, book_id, read_status) VALUES (1, 3, 0);
INSERT INTO reading_list (user_id, book_id, read_status) VALUES (2, 1, 0);